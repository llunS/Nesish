#include "console/cpu/cpu.hpp"
#include "console/cpu/opcode_exec.hpp"

#define EXEC_OF(i_opcode_name) CPU::OpcodeExec::exec_##i_opcode_name

namespace ln {

// Maybe we should write a script to generate this...

CPU::InstructionProperty CPU::s_instr_map[256] = {
    /* clang-format off */
    // -- 0x
    {Opcode::BRK, AddressMode::IMP, EXEC_OF(brk)},
    {Opcode::ORA, AddressMode::IZX, EXEC_OF(ora)},
    {Opcode::KIL, AddressMode::IMP, EXEC_OF(kil)},
    {Opcode::SLO, AddressMode::IZX, EXEC_OF(slo)},
    {Opcode::NOP, AddressMode::ZP0, EXEC_OF(nop)},
    {Opcode::ORA, AddressMode::ZP0, EXEC_OF(ora)},
    {Opcode::ASL, AddressMode::ZP0, EXEC_OF(asl)},
    {Opcode::SLO, AddressMode::ZP0, EXEC_OF(slo)},
    {Opcode::PHP, AddressMode::IMP, EXEC_OF(php)},
    {Opcode::ORA, AddressMode::IMM, EXEC_OF(ora)},
    {Opcode::ASL, AddressMode::ACC, EXEC_OF(asl)},
    {Opcode::ANC, AddressMode::IMM, EXEC_OF(anc)},
    {Opcode::NOP, AddressMode::ABS, EXEC_OF(nop)},
    {Opcode::ORA, AddressMode::ABS, EXEC_OF(ora)},
    {Opcode::ASL, AddressMode::ABS, EXEC_OF(asl)},
    {Opcode::SLO, AddressMode::ABS, EXEC_OF(slo)},
    // -- 1x
    {Opcode::BPL, AddressMode::REL, EXEC_OF(brk)},
    {Opcode::ORA, AddressMode::IZY, EXEC_OF(ora)},
    {Opcode::KIL, AddressMode::IMP, EXEC_OF(kil)},
    {Opcode::SLO, AddressMode::IZY, EXEC_OF(slo)},
    {Opcode::NOP, AddressMode::ZPX, EXEC_OF(nop)},
    {Opcode::ORA, AddressMode::ZPX, EXEC_OF(ora)},
    {Opcode::ASL, AddressMode::ZPX, EXEC_OF(asl)},
    {Opcode::SLO, AddressMode::ZPX, EXEC_OF(slo)},
    {Opcode::CLC, AddressMode::IMP, EXEC_OF(php)},
    {Opcode::ORA, AddressMode::ABY, EXEC_OF(ora)},
    {Opcode::NOP, AddressMode::IMP, EXEC_OF(asl)},
    {Opcode::SLO, AddressMode::ABY, EXEC_OF(anc)},
    {Opcode::NOP, AddressMode::ABX, EXEC_OF(nop)},
    {Opcode::ORA, AddressMode::ABX, EXEC_OF(ora)},
    {Opcode::ASL, AddressMode::ABX, EXEC_OF(asl)},
    {Opcode::SLO, AddressMode::ABX, EXEC_OF(slo)},
    // -- 2x
    {Opcode::JSR, AddressMode::ABS, EXEC_OF(jsr)},
    {Opcode::AND, AddressMode::IZX, EXEC_OF(and)},
    {Opcode::KIL, AddressMode::IMP, EXEC_OF(kil)},
    {Opcode::RLA, AddressMode::IZX, EXEC_OF(rla)},
    {Opcode::BIT, AddressMode::ZP0, EXEC_OF(bit)},
    {Opcode::AND, AddressMode::ZP0, EXEC_OF(and)},
    {Opcode::ROL, AddressMode::ZP0, EXEC_OF(rol)},
    {Opcode::RLA, AddressMode::ZP0, EXEC_OF(rla)},
    {Opcode::PLP, AddressMode::IMP, EXEC_OF(plp)},
    {Opcode::AND, AddressMode::IMM, EXEC_OF(and)},
    {Opcode::ROL, AddressMode::IMP, EXEC_OF(rol)},
    {Opcode::ANC, AddressMode::IMM, EXEC_OF(anc)},
    {Opcode::BIT, AddressMode::ABS, EXEC_OF(bit)},
    {Opcode::AND, AddressMode::ABS, EXEC_OF(and)},
    {Opcode::ROL, AddressMode::ABS, EXEC_OF(rol)},
    {Opcode::RLA, AddressMode::ABS, EXEC_OF(rla)},
    // -- 3x
    {Opcode::BMI, AddressMode::REL, EXEC_OF(bmi)},
    {Opcode::AND, AddressMode::IZY, EXEC_OF(and)},
    {Opcode::KIL, AddressMode::IMP, EXEC_OF(kil)},
    {Opcode::RLA, AddressMode::IZY, EXEC_OF(rla)},
    {Opcode::NOP, AddressMode::ZPX, EXEC_OF(nop)},
    {Opcode::AND, AddressMode::ZPX, EXEC_OF(and)},
    {Opcode::ROL, AddressMode::ZPX, EXEC_OF(rol)},
    {Opcode::RLA, AddressMode::ZPX, EXEC_OF(rla)},
    {Opcode::SEC, AddressMode::IMP, EXEC_OF(sec)},
    {Opcode::AND, AddressMode::ABY, EXEC_OF(and)},
    {Opcode::NOP, AddressMode::IMP, EXEC_OF(nop)},
    {Opcode::RLA, AddressMode::ABY, EXEC_OF(rla)},
    {Opcode::NOP, AddressMode::ABX, EXEC_OF(nop)},
    {Opcode::AND, AddressMode::ABX, EXEC_OF(and)},
    {Opcode::ROL, AddressMode::ABX, EXEC_OF(rol)},
    {Opcode::RLA, AddressMode::ABX, EXEC_OF(rla)},
    // -- 4x
    {Opcode::RTI, AddressMode::IMP, EXEC_OF(rti)},
    {Opcode::EOR, AddressMode::IZX, EXEC_OF(eor)},
    {Opcode::KIL, AddressMode::IMP, EXEC_OF(kil)},
    {Opcode::SRE, AddressMode::IZX, EXEC_OF(sre)},
    {Opcode::NOP, AddressMode::ZP0, EXEC_OF(nop)},
    {Opcode::EOR, AddressMode::ZP0, EXEC_OF(eor)},
    {Opcode::LSR, AddressMode::ZP0, EXEC_OF(lsr)},
    {Opcode::SRE, AddressMode::ZP0, EXEC_OF(sre)},
    {Opcode::PHA, AddressMode::IMP, EXEC_OF(pha)},
    {Opcode::EOR, AddressMode::IMM, EXEC_OF(eor)},
    {Opcode::LSR, AddressMode::IMP, EXEC_OF(lsr)},
    {Opcode::ALR, AddressMode::IMM, EXEC_OF(alr)},
    {Opcode::JMP, AddressMode::ABS, EXEC_OF(jmp)},
    {Opcode::EOR, AddressMode::ABS, EXEC_OF(eor)},
    {Opcode::LSR, AddressMode::ABS, EXEC_OF(lsr)},
    {Opcode::SRE, AddressMode::ABS, EXEC_OF(sre)},
    // -- 5x
    {Opcode::BVC, AddressMode::REL, EXEC_OF(bvc)},
    {Opcode::EOR, AddressMode::IZY, EXEC_OF(eor)},
    {Opcode::KIL, AddressMode::IMP, EXEC_OF(kil)},
    {Opcode::SRE, AddressMode::IZY, EXEC_OF(sre)},
    {Opcode::NOP, AddressMode::ZPX, EXEC_OF(nop)},
    {Opcode::EOR, AddressMode::ZPX, EXEC_OF(eor)},
    {Opcode::LSR, AddressMode::ZPX, EXEC_OF(lsr)},
    {Opcode::SRE, AddressMode::ZPX, EXEC_OF(sre)},
    {Opcode::CLI, AddressMode::IMP, EXEC_OF(cli)},
    {Opcode::EOR, AddressMode::ABY, EXEC_OF(eor)},
    {Opcode::NOP, AddressMode::IMP, EXEC_OF(nop)},
    {Opcode::SRE, AddressMode::ABY, EXEC_OF(sre)},
    {Opcode::NOP, AddressMode::ABX, EXEC_OF(nop)},
    {Opcode::EOR, AddressMode::ABX, EXEC_OF(eor)},
    {Opcode::LSR, AddressMode::ABX, EXEC_OF(lsr)},
    {Opcode::SRE, AddressMode::ABX, EXEC_OF(sre)},
    // -- 6x
    {Opcode::RTS, AddressMode::IMP, EXEC_OF(rts)},
    {Opcode::ADC, AddressMode::IZX, EXEC_OF(adc)},
    {Opcode::KIL, AddressMode::IMP, EXEC_OF(kil)},
    {Opcode::RRA, AddressMode::IZX, EXEC_OF(rra)},
    {Opcode::NOP, AddressMode::ZP0, EXEC_OF(nop)},
    {Opcode::ADC, AddressMode::ZP0, EXEC_OF(adc)},
    {Opcode::ROR, AddressMode::ZP0, EXEC_OF(ror)},
    {Opcode::RRA, AddressMode::ZP0, EXEC_OF(rra)},
    {Opcode::PLA, AddressMode::IMP, EXEC_OF(pla)},
    {Opcode::ADC, AddressMode::IMM, EXEC_OF(adc)},
    {Opcode::ROR, AddressMode::IMP, EXEC_OF(ror)},
    {Opcode::ARR, AddressMode::IMM, EXEC_OF(arr)},
    {Opcode::JMP, AddressMode::IND, EXEC_OF(jmp)},
    {Opcode::ADC, AddressMode::ABS, EXEC_OF(adc)},
    {Opcode::ROR, AddressMode::ABS, EXEC_OF(ror)},
    {Opcode::RRA, AddressMode::ABS, EXEC_OF(rra)},
    // -- 7x
    {Opcode::BVS, AddressMode::REL, EXEC_OF(bvs)},
    {Opcode::ADC, AddressMode::IZY, EXEC_OF(adc)},
    {Opcode::KIL, AddressMode::IMP, EXEC_OF(kil)},
    {Opcode::RRA, AddressMode::IZY, EXEC_OF(rra)},
    {Opcode::NOP, AddressMode::ZPX, EXEC_OF(nop)},
    {Opcode::ADC, AddressMode::ZPX, EXEC_OF(adc)},
    {Opcode::ROR, AddressMode::ZPX, EXEC_OF(ror)},
    {Opcode::RRA, AddressMode::ZPX, EXEC_OF(rra)},
    {Opcode::SEI, AddressMode::IMP, EXEC_OF(sei)},
    {Opcode::ADC, AddressMode::ABY, EXEC_OF(adc)},
    {Opcode::NOP, AddressMode::IMP, EXEC_OF(nop)},
    {Opcode::RRA, AddressMode::ABY, EXEC_OF(rra)},
    {Opcode::NOP, AddressMode::ABX, EXEC_OF(nop)},
    {Opcode::ADC, AddressMode::ABX, EXEC_OF(adc)},
    {Opcode::ROR, AddressMode::ABX, EXEC_OF(ror)},
    {Opcode::RRA, AddressMode::ABX, EXEC_OF(rra)},
    // -- 8x
    {Opcode::NOP, AddressMode::IMM, EXEC_OF(nop)},
    {Opcode::STA, AddressMode::IZX, EXEC_OF(sta)},
    {Opcode::NOP, AddressMode::IMM, EXEC_OF(nop)},
    {Opcode::SAX, AddressMode::IZX, EXEC_OF(sax)},
    {Opcode::STY, AddressMode::ZP0, EXEC_OF(sty)},
    {Opcode::STA, AddressMode::ZP0, EXEC_OF(sta)},
    {Opcode::STX, AddressMode::ZP0, EXEC_OF(stx)},
    {Opcode::SAX, AddressMode::ZP0, EXEC_OF(sax)},
    {Opcode::DEY, AddressMode::IMP, EXEC_OF(dey)},
    {Opcode::NOP, AddressMode::IMM, EXEC_OF(nop)},
    {Opcode::TXA, AddressMode::IMP, EXEC_OF(txa)},
    {Opcode::XAA, AddressMode::IMM, EXEC_OF(xaa)},
    {Opcode::STY, AddressMode::ABS, EXEC_OF(sty)},
    {Opcode::STA, AddressMode::ABS, EXEC_OF(sta)},
    {Opcode::STX, AddressMode::ABS, EXEC_OF(stx)},
    {Opcode::SAX, AddressMode::ABS, EXEC_OF(sax)},
    // -- 9x
    {Opcode::BCC, AddressMode::REL, EXEC_OF(bcc)},
    {Opcode::STA, AddressMode::IZY, EXEC_OF(sta)},
    {Opcode::KIL, AddressMode::IMP, EXEC_OF(kil)},
    {Opcode::AHX, AddressMode::IZY, EXEC_OF(ahx)},
    {Opcode::STY, AddressMode::ZPX, EXEC_OF(sty)},
    {Opcode::STA, AddressMode::ZPX, EXEC_OF(sta)},
    {Opcode::STX, AddressMode::ZPY, EXEC_OF(stx)},
    {Opcode::SAX, AddressMode::ZPY, EXEC_OF(sax)},
    {Opcode::TYA, AddressMode::IMP, EXEC_OF(tya)},
    {Opcode::STA, AddressMode::ABY, EXEC_OF(sta)},
    {Opcode::TXS, AddressMode::IMP, EXEC_OF(txs)},
    {Opcode::TAS, AddressMode::ABY, EXEC_OF(tas)},
    {Opcode::SHY, AddressMode::ABX, EXEC_OF(shy)},
    {Opcode::STA, AddressMode::ABX, EXEC_OF(sta)},
    {Opcode::SHX, AddressMode::ABY, EXEC_OF(shx)},
    {Opcode::AHX, AddressMode::ABY, EXEC_OF(ahx)},
    // -- Ax
    {Opcode::LDY, AddressMode::IMM, EXEC_OF(ldy)},
    {Opcode::LDA, AddressMode::IZX, EXEC_OF(lda)},
    {Opcode::LDX, AddressMode::IMM, EXEC_OF(ldx)},
    {Opcode::LAX, AddressMode::IZX, EXEC_OF(lax)},
    {Opcode::LDY, AddressMode::ZP0, EXEC_OF(ldy)},
    {Opcode::LDA, AddressMode::ZP0, EXEC_OF(lda)},
    {Opcode::LDX, AddressMode::ZP0, EXEC_OF(ldx)},
    {Opcode::LAX, AddressMode::ZP0, EXEC_OF(lax)},
    {Opcode::TAY, AddressMode::IMP, EXEC_OF(tay)},
    {Opcode::LDA, AddressMode::IMM, EXEC_OF(lda)},
    {Opcode::TAX, AddressMode::IMP, EXEC_OF(tax)},
    {Opcode::LAX, AddressMode::IMM, EXEC_OF(lax)},
    {Opcode::LDY, AddressMode::ABS, EXEC_OF(ldy)},
    {Opcode::LDA, AddressMode::ABS, EXEC_OF(lda)},
    {Opcode::LDX, AddressMode::ABS, EXEC_OF(ldx)},
    {Opcode::LAX, AddressMode::ABS, EXEC_OF(lax)},
    // -- Bx
    {Opcode::BCS, AddressMode::REL, EXEC_OF(bcs)},
    {Opcode::LDA, AddressMode::IZY, EXEC_OF(lda)},
    {Opcode::KIL, AddressMode::IMP, EXEC_OF(kil)},
    {Opcode::LAX, AddressMode::IZY, EXEC_OF(lax)},
    {Opcode::LDY, AddressMode::ZPX, EXEC_OF(ldy)},
    {Opcode::LDA, AddressMode::ZPX, EXEC_OF(lda)},
    {Opcode::LDX, AddressMode::ZPY, EXEC_OF(ldx)},
    {Opcode::LAX, AddressMode::ZPY, EXEC_OF(lax)},
    {Opcode::CLV, AddressMode::IMP, EXEC_OF(clv)},
    {Opcode::LDA, AddressMode::ABY, EXEC_OF(lda)},
    {Opcode::TSX, AddressMode::IMP, EXEC_OF(tsx)},
    {Opcode::LAS, AddressMode::ABY, EXEC_OF(las)},
    {Opcode::LDY, AddressMode::ABX, EXEC_OF(ldy)},
    {Opcode::LDA, AddressMode::ABX, EXEC_OF(lda)},
    {Opcode::LDX, AddressMode::ABY, EXEC_OF(ldx)},
    {Opcode::LAX, AddressMode::ABY, EXEC_OF(lax)},
    // -- Cx
    {Opcode::CPY, AddressMode::IMM, EXEC_OF(cpy)},
    {Opcode::CMP, AddressMode::IZX, EXEC_OF(cmp)},
    {Opcode::NOP, AddressMode::IMM, EXEC_OF(nop)},
    {Opcode::DCP, AddressMode::IZX, EXEC_OF(dcp)},
    {Opcode::CPY, AddressMode::ZP0, EXEC_OF(cpy)},
    {Opcode::CMP, AddressMode::ZP0, EXEC_OF(cmp)},
    {Opcode::DEC, AddressMode::ZP0, EXEC_OF(dec)},
    {Opcode::DCP, AddressMode::ZP0, EXEC_OF(dcp)},
    {Opcode::INY, AddressMode::IMP, EXEC_OF(iny)},
    {Opcode::CMP, AddressMode::IMM, EXEC_OF(cmp)},
    {Opcode::DEX, AddressMode::IMP, EXEC_OF(dex)},
    {Opcode::AXS, AddressMode::IMM, EXEC_OF(axs)},
    {Opcode::CPY, AddressMode::ABS, EXEC_OF(cpy)},
    {Opcode::CMP, AddressMode::ABS, EXEC_OF(cmp)},
    {Opcode::DEC, AddressMode::ABS, EXEC_OF(dec)},
    {Opcode::DCP, AddressMode::ABS, EXEC_OF(dcp)},
    // -- Dx
    {Opcode::BNE, AddressMode::REL, EXEC_OF(bne)},
    {Opcode::CMP, AddressMode::IZY, EXEC_OF(cmp)},
    {Opcode::KIL, AddressMode::IMP, EXEC_OF(kil)},
    {Opcode::DCP, AddressMode::IZY, EXEC_OF(dcp)},
    {Opcode::NOP, AddressMode::ZPX, EXEC_OF(nop)},
    {Opcode::CMP, AddressMode::ZPX, EXEC_OF(cmp)},
    {Opcode::DEC, AddressMode::ZPX, EXEC_OF(dec)},
    {Opcode::DCP, AddressMode::ZPX, EXEC_OF(dcp)},
    {Opcode::CLD, AddressMode::IMP, EXEC_OF(cld)},
    {Opcode::CMP, AddressMode::ABY, EXEC_OF(cmp)},
    {Opcode::NOP, AddressMode::IMP, EXEC_OF(nop)},
    {Opcode::DCP, AddressMode::ABY, EXEC_OF(dcp)},
    {Opcode::NOP, AddressMode::ABX, EXEC_OF(nop)},
    {Opcode::CMP, AddressMode::ABX, EXEC_OF(cmp)},
    {Opcode::DEC, AddressMode::ABX, EXEC_OF(dec)},
    {Opcode::DCP, AddressMode::ABX, EXEC_OF(dcp)},
    // -- Ex
    {Opcode::CPX, AddressMode::IMM, EXEC_OF(cpx)},
    {Opcode::SBC, AddressMode::IZX, EXEC_OF(sbc)},
    {Opcode::NOP, AddressMode::IMM, EXEC_OF(nop)},
    {Opcode::ISC, AddressMode::IZX, EXEC_OF(isc)},
    {Opcode::CPX, AddressMode::ZP0, EXEC_OF(cpx)},
    {Opcode::SBC, AddressMode::ZP0, EXEC_OF(sbc)},
    {Opcode::INC, AddressMode::ZP0, EXEC_OF(inc)},
    {Opcode::ISC, AddressMode::ZP0, EXEC_OF(isc)},
    {Opcode::INX, AddressMode::IMP, EXEC_OF(inx)},
    {Opcode::SBC, AddressMode::IMM, EXEC_OF(sbc)},
    {Opcode::NOP, AddressMode::IMP, EXEC_OF(nop)},
    {Opcode::SBC, AddressMode::IMM, EXEC_OF(sbc)},
    {Opcode::CPX, AddressMode::ABS, EXEC_OF(cpx)},
    {Opcode::SBC, AddressMode::ABS, EXEC_OF(sbc)},
    {Opcode::INC, AddressMode::ABS, EXEC_OF(inc)},
    {Opcode::ISC, AddressMode::ABS, EXEC_OF(isc)},
    // -- Fx
    {Opcode::BEQ, AddressMode::REL, EXEC_OF(beq)},
    {Opcode::SBC, AddressMode::IZY, EXEC_OF(sbc)},
    {Opcode::KIL, AddressMode::IMP, EXEC_OF(kil)},
    {Opcode::ISC, AddressMode::IZY, EXEC_OF(isc)},
    {Opcode::NOP, AddressMode::ZPX, EXEC_OF(nop)},
    {Opcode::SBC, AddressMode::ZPX, EXEC_OF(sbc)},
    {Opcode::INC, AddressMode::ZPX, EXEC_OF(inc)},
    {Opcode::ISC, AddressMode::ZPX, EXEC_OF(isc)},
    {Opcode::SED, AddressMode::IMP, EXEC_OF(sed)},
    {Opcode::SBC, AddressMode::ABY, EXEC_OF(sbc)},
    {Opcode::NOP, AddressMode::IMP, EXEC_OF(nop)},
    {Opcode::ISC, AddressMode::ABY, EXEC_OF(isc)},
    {Opcode::NOP, AddressMode::ABX, EXEC_OF(nop)},
    {Opcode::SBC, AddressMode::ABX, EXEC_OF(sbc)},
    {Opcode::INC, AddressMode::ABX, EXEC_OF(inc)},
    {Opcode::ISC, AddressMode::ABX, EXEC_OF(isc)},
    /* clang-format on */
};

} // namespace ln
